{% load static %}

<!-- Sidebar -->
<nav id="sidebar">
    
    <!-- Sidebar Header -->
    <div class="sidebar-header">
        <h3>
            <i class="bi bi-mortarboard-fill"></i> ERP Sistema
        </h3>
        {% if user.is_authenticated %}
            <small class="text-muted">{{ user.get_type_display }}</small>
        {% endif %}
    </div>
    
    <!-- Sidebar Menu -->
    <ul class="list-unstyled components">
        
        <!-- Bosh sahifa (hammaga) -->
        <li>
            <a href="{% url 'home' %}">
                <i class="bi bi-house-door"></i> Bosh Sahifa
            </a>
        </li>
        
        {% if user.is_authenticated %}
            
            <!-- Django Admin (faqat admin/staff uchun) -->
            {% if user.is_staff or is_admin %}
                <li>
                    <a href="{% url 'admin:index' %}">
                        <i class="bi bi-gear"></i> Django Admin Panel
                    </a>
                </li>
            {% endif %}
            
            <!-- Common Links -->
            <li class="mt-4 border-top pt-3">
                <a href="{% url 'accounts:profile' %}">
                    <i class="bi bi-person-circle"></i> Profil
                </a>
            </li>
            
            <li>
                <a href="{% url 'accounts:logout_confirm' %}">
                    <i class="bi bi-box-arrow-right"></i> Chiqish
                </a>
            </li>
            
        {% else %}
            <!-- Agar login qilmagan bo'lsa -->
            <li>
                <a href="{% url 'accounts:login' %}">
                    <i class="bi bi-box-arrow-in-right"></i> Kirish
                </a>
            </li>
            <li>
                <a href="{% url 'accounts:register' %}">
                    <i class="bi bi-person-plus"></i> Ro'yxatdan O'tish
                </a>
            </li>
        {% endif %}
        
    </ul>
    
    <!-- Sidebar Footer -->
    {% if user.is_authenticated %}
        <div class="sidebar-footer" style="position: absolute; bottom: 20px; left: 20px; right: 20px;">
            <small class="text-muted">
                <i class="bi bi-person-circle"></i> {{ user.get_full_name|default:user.email|truncatewords:2 }}
            </small>
        </div>
    {% endif %}
    
</nav>

<style>
    .sidebar-footer {
        padding: 10px;
        background: #1a252f;
        border-radius: 5px;
    }
</style>